"use strict";(self.webpackChunkBIATemplate=self.webpackChunkBIATemplate||[]).push([[726],{9716:(P,D,n)=>{n.d(D,{P:()=>_});var c=n(2654),p=n(1564),u=n(136),m=n(4297),b=n(9147),C=n(5e3),y=n(5094);let _=(()=>{class f{constructor(o,L){this.store=o,this.authService=L,this.sub=new c.w,this.InitSub(),this.loading$=this.store.select(m.gc)}get currentSite(){var o;return(null===(o=this._currentSite)||void 0===o?void 0:o.id)===this._currentSiteId?this._currentSite:null}get currentSiteId(){return this._currentSiteId}set currentSiteId(o){this._currentSiteId!==o&&(this._currentSiteId=Number(o),this.authService.changeCurrentTeamId(u.k0.Site,o),this.store.dispatch((0,b.zD)({id:o})))}InitSub(){this.sub=new c.w,this.sub.add(this.store.select(m.WQ).subscribe(o=>{o&&(this._currentSite=o)}))}}return f.\u0275fac=function(o){return new(o||f)(C.LFG(y.yh),C.LFG(p.e))},f.\u0275prov=C.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()},4726:(P,D,n)=>{n.r(D),n.d(D,{SiteModule:()=>ye});var c=n(4490),p=n(5094),u=n(6517),m=n(1086),b=n(373),C=n(7545),y=n(4850),_=n(7221),f=n(1406),g=n(7168),o=n(9147),L=n(4016),e=n(5e3);let w=(()=>{class s extends L.Z{constructor(t){super(t,"sites")}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(e.zs3))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Z=(()=>{class s extends L.Z{constructor(t){super(t,"sites")}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(e.zs3))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();var S=n(4297),z=n(42);let U=(()=>{class s{constructor(t,i,l,r,_e){this.actions$=t,this.siteDas=i,this.siteInfoDas=l,this.biaMessageService=r,this.store=_e,this.loadAllByPost$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(o.rF),(0,b.j)("event"),(0,C.w)(h=>this.siteInfoDas.getListByPost({event:h}).pipe((0,y.U)(v=>(0,o.ni)({result:v,event:h})),(0,_.K)(v=>(this.biaMessageService.showError(),(0,m.of)((0,o.Rn)({error:v})))))))),this.load$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(o.zD),(0,b.j)("id"),(0,C.w)(h=>this.siteDas.get({id:h}).pipe((0,y.U)(v=>(0,o.T4)({site:v})),(0,_.K)(v=>(this.biaMessageService.showError(),(0,m.of)((0,o.Rn)({error:v})))))))),this.create$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(o.Ue),(0,b.j)("site"),(0,f.b)(h=>(0,m.of)(h).pipe((0,g.M)(this.store.select(S.yG)))),(0,C.w)(([h,v])=>this.siteDas.post({item:h}).pipe((0,y.U)(()=>(this.biaMessageService.showAddSuccess(),(0,o.rF)({event:v}))),(0,_.K)(M=>(this.biaMessageService.showError(),(0,m.of)((0,o.Rn)({error:M})))))))),this.update$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(o.Vx),(0,b.j)("site"),(0,f.b)(h=>(0,m.of)(h).pipe((0,g.M)(this.store.select(S.yG)))),(0,C.w)(([h,v])=>this.siteDas.put({item:h,id:h.id}).pipe((0,y.U)(()=>(this.biaMessageService.showUpdateSuccess(),(0,o.rF)({event:v}))),(0,_.K)(M=>(this.biaMessageService.showError(),(0,m.of)((0,o.Rn)({error:M})))))))),this.destroy$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(o.Od),(0,b.j)("id"),(0,f.b)(h=>(0,m.of)(h).pipe((0,g.M)(this.store.select(S.yG)))),(0,C.w)(([h,v])=>this.siteDas.delete({id:h}).pipe((0,y.U)(()=>(this.biaMessageService.showDeleteSuccess(),(0,o.rF)({event:v}))),(0,_.K)(M=>(this.biaMessageService.showError(),(0,m.of)((0,o.Rn)({error:M})))))))),this.multiDestroy$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(o.v),(0,b.j)("ids"),(0,f.b)(h=>(0,m.of)(h).pipe((0,g.M)(this.store.select(S.yG)))),(0,C.w)(([h,v])=>this.siteDas.deletes({ids:h}).pipe((0,y.U)(()=>(this.biaMessageService.showDeleteSuccess(),(0,o.rF)({event:v}))),(0,_.K)(M=>(this.biaMessageService.showError(),(0,m.of)((0,o.Rn)({error:M}))))))))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(u.eX),e.LFG(w),e.LFG(Z),e.LFG(z.X),e.LFG(p.yh))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();var N=n(9157),a=n(136),F=n(1564),A=n(9206),O=n(5863),Q=n(6048),T=n(277),J=n(845),W=n(4119),K=n(2145),x=n(3075),E=n(7171);const Y=["template"],$=function(){return{width:"100%"}};function X(s,d){if(1&s){const t=e.EpF();e.TgZ(0,"div",1)(1,"button",2),e.NdJ("click",function(){return e.CHM(t),e.oxw().onClose()}),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"div",3)(4,"h1"),e._uU(5),e.ALo(6,"translate"),e.qZA()(),e.TgZ(7,"div",4)(8,"div",5)(9,"span",6)(10,"p-autoComplete",7),e.NdJ("ngModelChange",function(l){return e.CHM(t),e.oxw().userSelected=l})("completeMethod",function(l){return e.CHM(t),e.oxw().onSearchUsers(l)}),e.qZA(),e.TgZ(11,"label"),e._uU(12),e.ALo(13,"translate"),e.qZA()()()(),e.TgZ(14,"div",8)(15,"button",9),e.NdJ("click",function(){return e.CHM(t),e.oxw().onReset()}),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"button",10),e.NdJ("click",function(){return e.CHM(t),e.oxw().onFilter()}),e.ALo(18,"translate"),e.qZA()()()}if(2&s){const t=e.oxw();e.s9C("fxFlex",t.fxFlexValue),e.Q6J("hidden",t.hidden),e.xp6(1),e.s9C("pTooltip",e.lcZ(2,15,"msg.showFilters")),e.xp6(4),e.Oqu(e.lcZ(6,17,"bia.filters")),e.xp6(5),e.Akn(e.DdM(25,$)),e.Q6J("multiple",!1)("ngModel",t.userSelected)("suggestions",t.userOptions)("size",30)("minLength",2)("inputStyle",e.DdM(26,$)),e.xp6(2),e.Oqu(e.lcZ(13,19,"site.selectUser")),e.xp6(3),e.s9C("label",e.lcZ(16,21,"bia.reset")),e.xp6(2),e.s9C("label",e.lcZ(18,23,"bia.filter"))}}let k=(()=>{class s{constructor(t){this.viewContainerRef=t,this.hidden=!1,this.closeFilter=new e.vpe,this.searchUsers=new e.vpe,this.filter=new e.vpe}ngOnInit(){this.viewContainerRef.createEmbeddedView(this.template)}onClose(){this.closeFilter.emit()}onReset(){this.userSelected={},this.onFilter()}onFilter(){this.filter.emit({userId:this.userSelected?this.userSelected.id:0})}onSearchUsers(t){this.searchUsers.emit(t.query)}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(e.s_b))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-site-filter"]],viewQuery:function(t,i){if(1&t&&e.Gf(Y,7),2&t){let l;e.iGM(l=e.CRH())&&(i.template=l.first)}},inputs:{fxFlexValue:"fxFlexValue",userOptions:"userOptions",hidden:"hidden"},outputs:{closeFilter:"closeFilter",searchUsers:"searchUsers",filter:"filter"},decls:2,vars:0,consts:[["template",""],[1,"app-search-filter",3,"hidden","fxFlex"],["type","button","icon","pi pi-times","pButton","",1,"p-button-rounded","p-button-text","flat",3,"pTooltip","click"],["fxLayout","row","fxLayoutAlign","stretch center",1,"header"],["fxLayout","row","fxLayoutAlign","center"],["fxFlex","90",1,"app-filter-container"],[1,"p-float-label"],["field","display",3,"multiple","ngModel","suggestions","size","minLength","inputStyle","ngModelChange","completeMethod"],["fxLayout","row","fxLayoutAlign","space-around"],["pButton","","fxFlex","33",1,"p-button-outlined",3,"label","click"],["pButton","","fxFlex","33",3,"label","click"]],template:function(t,i){1&t&&e.YNc(0,X,19,27,"ng-template",null,0,e.W1O)},directives:[T.yH,J.Hq,W.u,T.xw,T.Wh,K.Qc,x.JJ,x.On],pipes:[E.X$],styles:["h3[_ngcontent-%COMP%]{margin-bottom:0}.app-filter-container[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:20px}.app-search-filter[_ngcontent-%COMP%]{margin:-15px 35px -15px -35px}.app-search-filter[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{position:absolute}.pi[_ngcontent-%COMP%]   pi-clear[_ngcontent-%COMP%]{margin-left:12px;margin-right:9px}.header[_ngcontent-%COMP%]{position:relative;top:30px;margin-bottom:15px;margin-left:20px}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:raleway-thin,serif;font-size:36px;font-weight:200;margin:0}"]}),s})();var q=n(1606),G=n(9783),I=n(9808),ee=n(6743),te=n(8385),B=n(2654),j=n(5315),ie=n(1424);let R=(()=>{class s{constructor(t){this.formBuilder=t,this.site={},this.save=new e.vpe,this.cancel=new e.vpe,this.initForm()}ngOnChanges(t){t.site&&(this.form.reset(),this.site&&this.form.patchValue(Object.assign({},this.site)))}initForm(){this.form=this.formBuilder.group({id:[this.site.id],title:[this.site.title,x.kI.required]})}onCancel(){this.form.reset(),this.cancel.next()}onSubmit(){if(this.form.valid){const t=this.form.value;t.id=t.id>0?t.id:0,this.save.emit(t),this.form.reset()}}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(x.qu))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-site-form"]],inputs:{site:"site"},outputs:{save:"save",cancel:"cancel"},features:[e.TTD],decls:15,vars:11,consts:[["fxLayout","column",3,"formGroup","submit"],["fxLayout","row","fxLayoutAlign","center"],["fxFlex","90",1,"app-field-container"],[1,"p-float-label"],["formControlName","title","type","text","pInputText","","maxlength","255"],[1,"bia-star-mandatory"],["fxLayout","row","fxLayoutGap","5px","fxLayoutAlign","end end"],["pButton","","type","submit",3,"label","disabled"],["pButton","","type","button",1,"p-button-outlined",3,"label","click"]],template:function(t,i){1&t&&(e.TgZ(0,"form",0),e.NdJ("submit",function(){return i.onSubmit()}),e.TgZ(1,"div",1)(2,"div",2)(3,"span",3),e._UZ(4,"input",4),e.TgZ(5,"label")(6,"span",5),e._uU(7,"*"),e.qZA(),e._uU(8),e.ALo(9,"translate"),e.qZA()()()(),e.TgZ(10,"div",6),e._UZ(11,"button",7),e.ALo(12,"translate"),e.TgZ(13,"button",8),e.NdJ("click",function(){return i.onCancel()}),e.ALo(14,"translate"),e.qZA()()()),2&t&&(e.Q6J("formGroup",i.form),e.xp6(8),e.Oqu(e.lcZ(9,5,"site.title")),e.xp6(3),e.s9C("label",e.lcZ(12,7,"bia.save")),e.Q6J("disabled",!i.form.valid),e.xp6(2),e.s9C("label",e.lcZ(14,9,"bia.cancel")))},directives:[x._Y,x.JL,T.xw,x.sg,T.Wh,T.yH,x.Fj,x.JJ,x.u,ie.o,x.nD,T.SQ,J.Hq],pipes:[E.X$],styles:[".app-field-container[_ngcontent-%COMP%]{margin-bottom:20px}input[_ngcontent-%COMP%]{width:100%}"],changeDetection:0}),s})();var H=n(9373);function se(s,d){1&s&&e._UZ(0,"bia-spinner",3),2&s&&e.Q6J("overlay",!0)}const ne=function(){return{minWidth:"50vw"}},oe=function(){return{overflow:"auto"}};let ae=(()=>{class s{constructor(t){this.store=t,this.display=!1,this.sub=new B.w,this.displayChange=new e.vpe}ngOnInit(){this.loading$=this.store.select(S.gc),this.site$=this.store.select(S.WQ),this.sub.add(this.store.select(S.de).subscribe(t=>this.display=t))}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}onSubmitted(t){this.store.dispatch((0,o.Vx)({site:t})),this.close()}onCancelled(){this.close()}close(){this.store.dispatch((0,o.iC)())}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(p.yh))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-site-edit-dialog"]],outputs:{displayChange:"displayChange"},decls:8,vars:20,consts:[[3,"focusOnShow","visible","modal","closable","responsive","maximizable","contentStyle","visibleChange"],[3,"site","cancel","save"],[3,"overlay",4,"ngIf"],[3,"overlay"]],template:function(t,i){1&t&&(e.TgZ(0,"p-dialog",0),e.NdJ("visibleChange",function(r){return i.display=r}),e.TgZ(1,"p-header"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"app-site-form",1),e.NdJ("cancel",function(){return i.onCancelled()})("save",function(r){return i.onSubmitted(r)}),e.ALo(5,"async"),e.qZA(),e.YNc(6,se,1,1,"bia-spinner",2),e.ALo(7,"async"),e.qZA()),2&t&&(e.Akn(e.DdM(18,ne)),e.Q6J("focusOnShow",!1)("visible",i.display)("modal",!0)("closable",!1)("responsive",!0)("maximizable",!0)("contentStyle",e.DdM(19,oe)),e.xp6(2),e.hij(" ",e.lcZ(3,12,"site.edit")," "),e.xp6(2),e.Q6J("site",e.lcZ(5,14,i.site$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(7,16,i.loading$)))},directives:[j.V,G.h4,R,I.O5,H.O],pipes:[E.X$,I.Ov],styles:[""]}),s})();const le=function(){return{minWidth:"50vw"}},re=function(){return{overflow:"auto"}};let ce=(()=>{class s{constructor(t){this.store=t,this.display=!1,this.sub=new B.w,this.displayChange=new e.vpe}ngOnInit(){this.sub.add(this.store.select(S.HM).subscribe(t=>this.display=t))}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}onSubmitted(t){this.store.dispatch((0,o.Ue)({site:t})),this.close()}onCancelled(){this.site={},this.close()}close(){this.store.dispatch((0,o.fe)())}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(p.yh))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-site-new-dialog"]],outputs:{displayChange:"displayChange"},decls:5,vars:15,consts:[[3,"focusOnShow","visible","modal","closable","responsive","maximizable","contentStyle","visibleChange"],[3,"site","cancel","save"]],template:function(t,i){1&t&&(e.TgZ(0,"p-dialog",0),e.NdJ("visibleChange",function(r){return i.display=r}),e.TgZ(1,"p-header"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"app-site-form",1),e.NdJ("cancel",function(){return i.onCancelled()})("save",function(r){return i.onSubmitted(r)}),e.qZA()()),2&t&&(e.Akn(e.DdM(13,le)),e.Q6J("focusOnShow",!1)("visible",i.display)("modal",!0)("closable",!1)("responsive",!0)("maximizable",!0)("contentStyle",e.DdM(14,re)),e.xp6(2),e.hij(" ",e.lcZ(3,11,"site.add")," "),e.xp6(2),e.Q6J("site",i.site))},directives:[j.V,G.h4,R],pipes:[E.X$],styles:[""]}),s})();function de(s,d){if(1&s){const t=e.EpF();e.TgZ(0,"button",8),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).onEdit()}),e.ALo(1,"translate"),e.qZA()}if(2&s){const t=e.oxw(2);e.s9C("label",e.lcZ(1,2,"site.edit")),e.Q6J("disabled",1!==(null==t.selectedSites?null:t.selectedSites.length))}}function pe(s,d){if(1&s&&e.YNc(0,de,2,4,"button",7),2&s){const t=e.oxw();e.Q6J("ngIf",t.canEdit)}}let ue=(()=>{class s{constructor(t,i,l,r){this.store=t,this.authService=i,this.router=l,this.route=r,this.flex=!0,this.showColSearch=!1,this.globalSearchValue="",this.defaultPageSize=a.L8,this.pageSize=this.defaultPageSize,this.showFilter=!1,this.haveFilter=!1,this.canEdit=!1,this.canDelete=!1,this.canAdd=!1,this.canManageMembers=!1}ngOnInit(){this.initTableConfiguration(),this.setPermissions(),this.initUsers(),this.initSites(),this.initTotalCount(),this.initLoading()}onCreate(){this.store.dispatch((0,o.xc)())}onEdit(){this.selectedSites&&1===this.selectedSites.length&&(this.store.dispatch((0,o.zD)({id:this.selectedSites[0].id})),this.store.dispatch((0,o.zN)()))}onDelete(){this.selectedSites&&this.store.dispatch((0,o.v)({ids:this.selectedSites.map(t=>t.id)}))}onSelectedElementsChanged(t){this.selectedSites=t}onManageMember(t){t&&t>0&&this.router.navigate(["sites",t,"members"])}onPageSizeChange(t){this.pageSize=t}onLoadLazy(t){this.lastLazyLoadEvent=t;const l=Object.assign({userId:this.advancedFilter&&this.advancedFilter.userId>0?this.advancedFilter.userId:0},t);this.store.dispatch((0,o.rF)({event:l}))}onSearchUsers(t){this.store.dispatch(Q.d.loadAllByFilter({filter:t}))}onFilter(t){this.advancedFilter=t,this.haveFilter=this.advancedFilter&&this.advancedFilter.userId>0,this.onLoadLazy(this.lastLazyLoadEvent)}searchGlobalChanged(t){this.globalSearchValue=t}displayedColumnsChanged(t){this.displayedColumns=t}onCloseFilter(){this.showFilter=!1}onOpenFilter(){this.showFilter=!0}onToggleSearch(){this.showColSearch=!this.showColSearch}toSiteListVM(t){return{id:t.id,title:t.title,siteAdmin:t.siteAdmins?t.siteAdmins.map(i=>`${i.userLastName} ${i.userFirstName}`).join(", "):""}}onViewChange(t){this.updateAdvancedFilterByView(t),this.viewPreference=t}updateAdvancedFilterByView(t){let i={},l=!1;if(t&&t!==a.cp){const r=JSON.parse(t);r&&r.advancedFilter&&(i=r.advancedFilter,l=this.advancedFilter&&this.advancedFilter.userId>0)}this.advancedFilter=i,this.haveFilter=l}setPermissions(){this.canEdit=this.authService.hasPermission(A.y.Site_Update),this.canDelete=this.authService.hasPermission(A.y.Site_Delete),this.canAdd=this.authService.hasPermission(A.y.Site_Create),this.canManageMembers=this.authService.hasPermission(A.y.Site_Member_List_Access)}initTableConfiguration(){this.tableConfiguration={columns:[new N.kc("title","site.title"),Object.assign(new N.kc("siteAdmin","site.admins"),{})]},this.columns=this.tableConfiguration.columns.map(t=>({key:t.field,value:t.header})),this.displayedColumns=this.columns}initLoading(){this.loading$=this.store.select(S.JV)}initTotalCount(){this.totalCount$=this.store.select(S.Gz)}initSites(){this.sites$=this.store.select(S.FN).pipe((0,y.U)(t=>t.map(i=>this.toSiteListVM(i))))}initUsers(){this.userOptions$=this.store.select(O.yp)}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(p.yh),e.Y36(F.e),e.Y36(c.F0),e.Y36(c.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-sites-index"]],hostVars:2,hostBindings:function(t,i){2&t&&e.ekj("bia-flex",i.flex)},decls:16,vars:39,consts:[["fxLayout","","fxLayout.xs","column","fxLayoutWrap","wrap"],[3,"hidden","fxFlexValue","userOptions","searchUsers","filter","closeFilter"],["fxFlex","100"],[3,"headerTitle","canAdd","canDelete","canExportCSV","showBtnFilter","showFilter","haveFilter","selectedElements","openFilter","create","delete"],["pTemplate","actionOnSelected"],[3,"defaultPageSize","length","columns","columnToDisplays","displayedColumnsChange","filter","pageSizeChange","toggleSearch","viewChange"],[3,"elements","totalRecord","columnToDisplays","pageSize","configuration","showColSearch","globalSearchValue","canClickRow","canSelectElement","loading","viewPreference","advancedFilter","clickRow","loadLazy","selectedElementsChanged"],["pButton","","class","p-button-outlined",3,"disabled","label","click",4,"ngIf"],["pButton","",1,"p-button-outlined",3,"disabled","label","click"]],template:function(t,i){1&t&&(e.TgZ(0,"div")(1,"div",0)(2,"app-site-filter",1),e.NdJ("searchUsers",function(r){return i.onSearchUsers(r)})("filter",function(r){return i.onFilter(r)})("closeFilter",function(){return i.onCloseFilter()}),e.ALo(3,"async"),e.qZA(),e.TgZ(4,"div",2)(5,"bia-table-header",3),e.NdJ("openFilter",function(){return i.onOpenFilter()})("create",function(){return i.onCreate()})("delete",function(){return i.onDelete()}),e.ALo(6,"translate"),e.YNc(7,pe,1,1,"ng-template",4),e.qZA(),e.TgZ(8,"bia-table-controller",5),e.NdJ("displayedColumnsChange",function(r){return i.displayedColumnsChanged(r)})("filter",function(r){return i.searchGlobalChanged(r)})("pageSizeChange",function(r){return i.onPageSizeChange(r)})("toggleSearch",function(){return i.onToggleSearch()})("viewChange",function(r){return i.onViewChange(r)}),e.ALo(9,"async"),e.qZA(),e.TgZ(10,"bia-table",6),e.NdJ("clickRow",function(r){return i.onManageMember(r)})("loadLazy",function(r){return i.onLoadLazy(r)})("selectedElementsChanged",function(r){return i.onSelectedElementsChanged(r)}),e.ALo(11,"async"),e.ALo(12,"async"),e.ALo(13,"async"),e.qZA()()(),e._UZ(14,"app-site-edit-dialog")(15,"app-site-new-dialog"),e.qZA()),2&t&&(e.xp6(2),e.Q6J("hidden",!i.showFilter)("fxFlexValue",25)("userOptions",e.lcZ(3,27,i.userOptions$)),e.xp6(3),e.Q6J("headerTitle",e.lcZ(6,29,"site.listOf"))("canAdd",i.canAdd)("canDelete",i.canDelete)("canExportCSV",!1)("showBtnFilter",!0)("showFilter",i.showFilter)("haveFilter",i.haveFilter)("selectedElements",i.selectedSites),e.xp6(3),e.Q6J("defaultPageSize",i.defaultPageSize)("length",e.lcZ(9,31,i.totalCount$))("columns",i.columns)("columnToDisplays",i.displayedColumns),e.xp6(2),e.Q6J("elements",e.lcZ(11,33,i.sites$))("totalRecord",e.lcZ(12,35,i.totalCount$))("columnToDisplays",i.displayedColumns)("pageSize",i.pageSize)("configuration",i.tableConfiguration)("showColSearch",i.showColSearch)("globalSearchValue",i.globalSearchValue)("canClickRow",i.canManageMembers)("canSelectElement",i.canDelete)("loading",e.lcZ(13,37,i.loading$))("viewPreference",i.viewPreference)("advancedFilter",i.advancedFilter))},directives:[T.xw,k,T.yH,q.l,G.jx,I.O5,J.Hq,ee.B,te.$,ae,ce],pipes:[I.Ov,E.X$],styles:["[_nghost-%COMP%]{flex-direction:column}bia-table-controller[_ngcontent-%COMP%]{margin-left:-35px;margin-right:-35px}"]}),s})();var he=n(9417),V=n(6249),me=n(9716),ge=n(466),fe=n(7224);function Se(s,d){1&s&&e._UZ(0,"bia-spinner",1),2&s&&e.Q6J("overlay",!0)}let ve=(()=>{class s{constructor(t,i,l,r){this.store=t,this.route=i,this.siteService=l,this.layoutService=r,this.sub=new B.w}ngOnInit(){this.siteService.currentSiteId=+this.route.snapshot.params.siteId,this.sub.add(this.store.select(S.WQ).subscribe(t=>{(null==t?void 0:t.title)&&(this.route.data.pipe((0,fe.P)()).subscribe(i=>{i.breadcrumb=t.title}),this.layoutService.refreshBreadcrumb())}))}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(p.yh),e.Y36(c.gz),e.Y36(me.P),e.Y36(ge.N))},s.\u0275cmp=e.Xpm({type:s,selectors:[["ng-component"]],decls:3,vars:3,consts:[[3,"overlay",4,"ngIf"],[3,"overlay"]],template:function(t,i){1&t&&(e._UZ(0,"router-outlet"),e.YNc(1,Se,1,1,"bia-spinner",0),e.ALo(2,"async")),2&t&&(e.xp6(1),e.Q6J("ngIf",e.lcZ(2,1,i.siteService.loading$)))},directives:[c.lC,I.O5,H.O],pipes:[I.Ov],styles:[""]}),s})();var Ce=n(3931);const be=[{path:"",data:{breadcrumb:null,permission:A.y.Site_List_Access},component:ue,canActivate:[V.n]},{path:":siteId",data:{breadcrumb:"",canNavigate:!1},component:ve,canActivate:[V.n],children:[{path:"members",data:{breadcrumb:"app.members",canNavigate:!0,permission:A.y.Site_Member_List_Access},loadChildren:()=>Promise.all([n.e(434),n.e(562)]).then(n.bind(n,562)).then(s=>s.SiteMemberModule)}]},{path:"**",redirectTo:""}];let ye=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[[he.m,Ce.U,c.Bz.forChild(be),p.Aw.forFeature("sites",S.ll),u.sQ.forFeature([U])]]}),s})()},4297:(P,D,n)=>{n.d(D,{FN:()=>U,WQ:()=>L,de:()=>S,HM:()=>z,yG:()=>e,gc:()=>w,JV:()=>Z,Gz:()=>o,ll:()=>_});var c=n(5685),p=n(5094),u=n(9147);const m=(0,c.H)({selectId:a=>a.id,sortComparer:!1}),b=m.getInitialState({totalCount:0,currentSite:{},lastLazyLoadEvent:{},loadingGet:!1,loadingGetAll:!1,displayEditDialog:!1,displayNewDialog:!1}),C=(0,p.Lq)(b,(0,p.on)(u.xc,a=>Object.assign(Object.assign({},a),{displayNewDialog:!0})),(0,p.on)(u.fe,a=>Object.assign(Object.assign({},a),{displayNewDialog:!1})),(0,p.on)(u.zN,a=>Object.assign(Object.assign({},a),{displayEditDialog:!0})),(0,p.on)(u.iC,a=>Object.assign(Object.assign({},a),{displayEditDialog:!1})),(0,p.on)(u.rF,(a,{})=>Object.assign(Object.assign({},a),{loadingGetAll:!0})),(0,p.on)(u.zD,a=>Object.assign(Object.assign({},a),{loadingGet:!0})),(0,p.on)(u.ni,(a,{result:F,event:A})=>{const O=m.setAll(F.data,a);return O.currentSite={},O.totalCount=F.totalCount,O.lastLazyLoadEvent=A,O.loadingGetAll=!1,O}),(0,p.on)(u.T4,(a,{site:F})=>Object.assign(Object.assign({},a),{currentSite:F,loadingGet:!1})),(0,p.on)(u.Rn,(a,{})=>Object.assign(Object.assign({},a),{loadingGetAll:!1,loadingGet:!1})));function _(a,F){return(0,p.UY)({sites:C})(a,F)}const f=(0,p.ZF)("sites"),g=(0,p.P1)(f,a=>a.sites),o=(0,p.P1)(g,a=>a.totalCount),L=(0,p.P1)(g,a=>a.currentSite),e=(0,p.P1)(g,a=>a.lastLazyLoadEvent),w=(0,p.P1)(g,a=>a.loadingGet),Z=(0,p.P1)(g,a=>a.loadingGetAll),S=(0,p.P1)(g,a=>a.displayEditDialog),z=(0,p.P1)(g,a=>a.displayNewDialog),{selectAll:U}=m.getSelectors(g)},9147:(P,D,n)=>{n.d(D,{Od:()=>C,Rn:()=>g,T4:()=>f,Ue:()=>m,Vx:()=>b,fe:()=>w,iC:()=>L,ni:()=>_,rF:()=>p,v:()=>y,xc:()=>e,zD:()=>u,zN:()=>o});var c=n(5094);const p=(0,c.PH)("[Sites] Load all by post",(0,c.Ky)()),u=(0,c.PH)("[Sites] Load",(0,c.Ky)()),m=(0,c.PH)("[Sites] Create",(0,c.Ky)()),b=(0,c.PH)("[Sites] Update",(0,c.Ky)()),C=(0,c.PH)("[Sites] Remove",(0,c.Ky)()),y=(0,c.PH)("[Sites] Multi Remove",(0,c.Ky)()),_=(0,c.PH)("[Sites] Load all by post success",(0,c.Ky)()),f=(0,c.PH)("[Sites] Load success",(0,c.Ky)()),g=(0,c.PH)("[Sites] Failure",(0,c.Ky)()),o=(0,c.PH)("[Sites] Open dialog edit"),L=(0,c.PH)("[Sites] Close dialog edit"),e=(0,c.PH)("[Sites] Open dialog new"),w=(0,c.PH)("[Sites] Close dialog new")}}]);